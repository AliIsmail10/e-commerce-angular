<!-- product-list.component.html -->
<div class="content-wraper pt-60 pb-60 pt-sm-30">
  <div class="container">
    <div class="row">
      <div class="col-lg-9 order-1 order-lg-2">
        <!-- Banner Area -->
        <div class="single-banner shop-page-banner">
          <a>
            <img src="images/bg-banner/2.jpg" alt="Li's Static Banner" />
          </a>
        </div>


        <div class="shop-top-bar mt-30">
          <div class="shop-bar-inner">
            <div class="product-view-mode">
              <ul class="nav shop-item-filter-list" role="tablist">
                <li class="active" role="presentation">
                  <a
                    aria-selected="true"
                    class="active show"
                    data-toggle="tab"
                    role="tab"
                    aria-controls="grid-view"
                  >
                    <i class="fa fa-th"></i>
                  </a>
                </li>
                
              </ul>
            </div>
            <div class="toolbar-amount">
              <span
                >Showing 1 to {{ products.length }} of
                {{ products.length }}</span
              >
            </div>
          </div>

          <div class="product-select-box">
            <div class="product-short">
              <p>Sort By:</p>
              <select class="nice-select" (change)="onSortChange($event)">
                <option value="">Default</option>
                <option value="price">Price (Low > High)</option>
                <option value="-price">Price (High > Low)</option>
              </select>
            </div>
          </div>
        </div>
        <!-- End Shop Top Bar -->

        <!-- Products Wrapper -->
        <div class="shop-products-wrapper">
          <div class="tab-content">
            <div
              id="grid-view"
              class="tab-pane fade active show"
              role="tabpanel"
            >
              <div class="product-area shop-product-area">
                <div class="row">
                    @if (products.length > 0) {
                      @for (product of products | filter:searchTerm; track product._id) {
                        <div class="col-lg-4 col-md-4 col-sm-6 mt-40">
                          <app-product-cart [product]="product"></app-product-cart>
                        </div>
                      }
                      @empty {
                        <div class="col-lg-12 col-md-12 col-sm-12 mt-40">
                          <h3 class="text-center d-flex flex-column justify-content-center align-items-center">
                            No products found
                            <img class="w-50" src="https://media.istockphoto.com/id/1441438513/vector/empty-classic-shopping-cart-flat-side-view-of-shopping-cart-or-trolley.jpg?s=612x612&w=0&k=20&c=x2OKIckXFG0KlHbcwgvIrtUKpp3NsXLqEcUxbZQmXIA=" alt="Empty cart">
                          </h3>
                        </div>
                      }
                    } @else {
                      <div class="col-lg-12 col-md-12 col-sm-12 mt-40">
                        <h3 class="text-center d-flex flex-column justify-content-center align-items-center">
                          No products found
                          <img class="w-50" src="https://media.istockphoto.com/id/1441438513/vector/empty-classic-shopping-cart-flat-side-view-of-shopping-cart-or-trolley.jpg?s=612x612&w=0&k=20&c=x2OKIckXFG0KlHbcwgvIrtUKpp3NsXLqEcUxbZQmXIA=" alt="Empty cart">
                       
                        </h3>
                      </div>
                    }
                  </div>
              </div>
            </div>
          </div>
        </div>
        <!-- End Products Wrapper -->
      </div>

      <!-- Sidebar -->
      <div class="col-lg-3 order-2 order-lg-1">
        <!-- Categories Box -->
  

        <!-- Filter Box -->
        <div class="sidebar-categores-box">
          <div class="sidebar-title">
            <h2>Filter By</h2>
          </div>

          <!-- Brands Filter -->
          <div class="filter-sub-area">
            <h5 class="filter-sub-titel">Brands</h5>
            <div class="categori-checkbox">
              <form>
                <ul>
                  <li *ngFor="let brand of visibleBrands">
                    <input class="mx-2"
                      type="checkbox"
                      [value]="brand._id"
                      [checked]="selectedBrandId === brand._id"
                      (change)="onBrandChange($event, brand._id)"
                    />
                    <label>{{ brand.name }}</label>
                  </li>
                </ul>
              </form>
            </div>
            <button *ngIf="brands.length > 5" (click)="toggleShowMore('brands')" class="btn btn-link">
              {{ showMoreBrands ? "Show Less" : "Show More" }}
            </button>
          </div>

          <!-- Categories Filter -->

          <div class="filter-sub-area">
            <h5 class="filter-sub-titel">Categories</h5>
            <div class="categori-checkbox">
              <form>
                <ul>
                  <li *ngFor="let category of visibleCategories">
                    <input
                    class="mx-2"
                      type="checkbox"
                      [value]="category._id"
                      [checked]="selectedCategoryId === category._id"
                      (change)="onCategoryChange($event, category._id)"
                    />
                    <label>{{ category.name }}</label>
                  </li>
                </ul>
              </form>
            </div>
            <button *ngIf="categories.length > 5" (click)="toggleShowMore('categories')" class="btn btn-link">
              {{ showMoreCategories ? "Show Less" : "Show More" }}
            </button>
          </div>
          <!-- Tags Box -->
      
        </div>
        <!-- End Sidebar -->
      </div>
    </div>
  </div>
</div>
